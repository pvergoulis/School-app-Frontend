<div class="w-auto vh-100">
  <app-navbar-before-login></app-navbar-before-login>
  <div class="container">
    <div class="mt-5  p-4">
      <h3 class="text-center my-color-brown">Î’ÏÎµÏ‚ Ï„Î¿Î½ Î¼Î±Î¸Î·Ï„Î® Ï€Î¿Ï… ÏˆÎ¬Ï‡Î½ÎµÎ¹Ï‚</h3>
      <div class="mx-auto text-center mt-3">
        <input
          type="text"
          class="rounded-pill border-2 shadow-lg border-primary w-25 mx-auto ps-2"
          [(ngModel)]="studentName"
          (input)="onInput()"
          placeholder="Î Î»Î·ÎºÏ„ÏÎ¿Î»Î¿Î³Î·ÏƒÎµ Ï„Î¿ Î¿Î½Î¿Î¼Î± Ï„Î¿Ï… Î¼Î±Î¸Î·Ï„Î·"
        />
      </div>
    </div>

    
    <div class="d-flex container justify-content-center">
      @if(selectedStudent){
      <table class="table table-bordered w-50 border-1 shadow-lg rounded-4">
        <caption class="text-center">
          Î£Ï„Î¿Î¹Ï‡Î¯Î± ÎœÎ±Î¸Î·Ï„Î®
        </caption>
        <tr>
          <td class="fw-semibold ps-2">ÎŒÎ½Î¿Î¼Î±:</td>
          <td class="ps-2">{{ selectedStudent.firstname }}</td>
        </tr>
        <tr>
          <td class="fw-semibold ps-2">Î•Ï€Ï‰Î½Ï…Î¼Î¿:</td>
          <td class="ps-2">{{ selectedStudent.lastname }}</td>
        </tr>
        <tr>
          <td class="fw-semibold ps-2">Email:</td>
          <td class="ps-2">{{ selectedStudent.email }}</td>
        </tr>
        <tr>
          <td class="fw-semibold ps-2">Î¤Î·Î»Î­Ï†Ï‰Î½Î¿:</td>
          <td class="ps-2">{{ selectedStudent.phone }}</td>
        </tr>
        <tr>
          <td class="fw-semibold ps-2">Î—Î»Î¹ÎºÎ¯Î±:</td>
          <td class="ps-2">{{ selectedStudent.age }}</td>
        </tr>

        <tr>
          <td class="fw-semibold ps-2">ÎœÎ±Î¸Î®Î¼Î±Ï„Î± & Î’Î±Î¸Î¼Î¿Î¯:</td>
          @for (subject of selectedStudent.subjects; track subject.subjectName
          ?? subject) {
          <div>{{ subject.subjectName }} - {{ subject.grade }}</div>
          }
        </tr>
          
       
      </table>
       @if(user()?.roles?.includes("ADMIN") || user()?.roles?.includes("TEACHER")){
          <div class=" d-flex flex-column gap-4 ms-2">
            <button class="btn btn-success h-25" (click)="updateStudent()">Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ·</button>
            <button class="btn btn-danger h-25" (click)="deleteStudent()"> Î”Î¹Î±Î³ÏÎ±Ï†Î·</button>
          </div>
        }
      }
    </div>
    <div class="mt-5 mb-5">
      <h3 class="text-center my-color-brown">ÎŸÎ¹ Î¼Î±Î¸Î·Ï„Î­Ï‚ Ï„Î¿Ï… Coding Factory</h3>
      @if(user()?.roles?.includes("ADMIN") || user()?.roles?.includes("TEACHER")){
        <button class="btn btn-primary" (click)="addStudent()">Î•Î¹ÏƒÎ±Î³Ï‰Î³Î® Î¼Î±Î¸Î·Ï„Î®</button>
      }
    </div>
    <div class="mt-5 mb-5 ">
      <table class="table table-bordered table-striped text-wrap text-center shadow-lg">
        <th (click)="sortStudents('firstname')" class="pointer-event">ÎŒÎ½Î¿Î¼Î±
          @if(sortColumn === 'firstname'){
          <span>{{ sortDirection === 'asc' ? 'ğŸ”¼' : 'ğŸ”½' }}</span>
          }
        </th>
        
        <th (click)="sortStudents('lastname')" class="pointer-event">
          @if(sortColumn === 'lastname'){
          <span>{{ sortDirection === 'asc' ? 'ğŸ”¼' : 'ğŸ”½' }}</span>
          }
          Î•Ï€Ï‰Î½Ï…Î¼Î¿</th>

        <th (click)="sortStudents('email')" class="pointer-event">
          @if(sortColumn === 'email'){
          <span>{{ sortDirection === 'asc' ? 'ğŸ”¼' : 'ğŸ”½' }}</span>
          }
          Email</th>

        <th (click)="sortStudents('phone')" class="pointer-event">
          @if(sortColumn === 'phone'){
          <span>{{ sortDirection === 'asc' ? 'ğŸ”¼' : 'ğŸ”½' }}</span>
          }
          Î¤Î·Î»Î­Ï†Ï‰Î½Î¿</th>
          
        <th (click)="sortStudents('age')" class="pointer-event">
          @if(sortColumn === 'age'){
          <span>{{ sortDirection === 'asc' ? 'ğŸ”¼' : 'ğŸ”½' }}</span>
          }
          Î—Î»Î¹ÎºÎ¯Î±</th>

        <tbody>
          @for(student of studentData; track student){
          <tr class="align-middle text-center">
            <td>{{ student.firstname }}</td>
            <td>{{ student.lastname }}</td>
            <td>{{ student.email }}</td>
            <td>{{ student.phone }}</td>
            <td>{{ student.age }}</td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
  <app-footer></app-footer>
</div>
